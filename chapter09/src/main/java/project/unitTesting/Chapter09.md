# Chapter 09: 목 처리에 대한 모범 사례

---

## 비관리 의존성과의 상호작용 검증
- **시스템 끝에서 비관리 의존성과의 상호작용을 검증**해야 함.
- 컨트롤러와 비관리 의존성 사이의 **타입 사슬 마지막 고리**를 목(Mock)으로 처리.
  - **효과**: 회귀 방지 및 리팩터링 내성 향상.

---

## 스파이(Spy)의 활용
- **스파이**: 직접 작성한 목(Mock)으로, 시스템 끝에 있는 클래스에 유리.
  - **장점**:
    - 검증 단계에서 코드 재사용 가능.
    - 테스트 크기 감소.
    - 가독성 개선.

---

## 검증문 작성 원칙
- **제품 코드에 의존하지 말라**:
  - 테스트에서는 별도의 리터럴과 상수 집합을 사용.
  - 필요하면 리터럴과 상수를 복제.
- **목적**:
  - 테스트는 제품 코드와 독립적인 검사점을 제공.
  - 동어 반복 테스트 생성 방지.

---

## 목(Mock)의 사용 범위
1. **목은 비관리 의존성만을 위한 것**:
   - SMTP 서버, 메시지 버스 등.
2. **통합 테스트에서만 목을 사용**:
   - 컨트롤러를 테스트할 때 적용.
3. **단위 테스트에서 목 사용 금지**:
   - 단위 테스트는 목을 지양하고 독립적인 로직 검증에 집중.

---

## 목의 호출 검증
- **예상되는 호출** 여부 확인.
- **예상치 못한 호출**이 없는지 확인.
